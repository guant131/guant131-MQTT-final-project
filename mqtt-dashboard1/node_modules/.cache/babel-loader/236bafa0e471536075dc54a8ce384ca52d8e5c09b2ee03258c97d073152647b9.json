{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      manualMode: false,\n      lightingStatus: \"N/A\",\n      waterHeaterStatus: \"N/A\",\n      heaterButtonText: \"Turn On\",\n      statusMapping: {\n        brighter: \"BRIGHTER\",\n        dimmer: \"DIMMER\",\n        off: \"OFF\",\n        on: \"ON\"\n      },\n      dialogVisible: false,\n      deviceData: {},\n      currentDevice: \"\",\n      lightingData: {},\n      waterHeaterData: {},\n      cameraStatus: \"N/A\",\n      cameraData: {},\n      showCameraData: false,\n      cameraStream: null,\n      showLightingData: false,\n      showWaterHeaterData: false,\n      coolingStatus: \"N/A\",\n      dehumidifyingStatus: \"N/A\",\n      airConditionerData: {},\n      showAirData: false,\n      fixedStatus: {\n        lighting: null,\n        water_heater: null\n      }\n    };\n  },\n  methods: {\n    toggleManualMode() {\n      console.log(`[Mode Switch] The current mode: ${this.manualMode ? 'Manual' : 'Auto'}`);\n      if (!this.manualMode) {\n        // Switch to automatic mode\n        console.log(\"[Switch to Auto Mode] status is reset to N/A\");\n\n        // All device status resets\n        this.lightingStatus = \"N/A\";\n        this.waterHeaterStatus = \"N/A\";\n        this.coolingStatus = \"N/A\";\n        this.dehumidifyingStatus = \"N/A\";\n        this.heaterButtonText = \"Turn On\";\n\n        // Clear the local storage\n        localStorage.setItem(\"manualMode\", \"false\");\n        localStorage.removeItem(\"lightingStatus\");\n        localStorage.removeItem(\"waterHeaterStatus\");\n        localStorage.removeItem(\"coolingStatus\");\n        localStorage.removeItem(\"dehumidifyingStatus\");\n\n        // Clear the fixed display status\n        this.fixedStatus = {\n          lighting: null,\n          water_heater: null\n        };\n\n        // Sync backend: Switch to automatic mode\n        axios.post(\"http://localhost:5050/api/device/toggle-mode\", {\n          manual_mode: \"off\"\n        }).then(response => {\n          console.log(\"[Backend Sync] switches to automatic mode:\", response.data.message);\n        }).catch(error => {\n          console.error(\"[Error] Failed to switch to automatic mode:\", error);\n        });\n      } else {\n        // Switch to manual mode\n        console.log(\"[Switch to Manual Mode] Restore the state of local storage\");\n\n        // Restore the lights and water heater status\n        const lightingState = localStorage.getItem(\"lightingStatus\");\n        const heaterState = localStorage.getItem(\"waterHeaterStatus\");\n        this.lightingStatus = lightingState ? lightingState : \"OFF\";\n        this.waterHeaterStatus = heaterState ? heaterState : \"OFF\";\n        this.heaterButtonText = this.waterHeaterStatus === \"ON\" ? \"Turn Off\" : \"Turn On\";\n\n        // Restore the cooling / dehumidifying state of the air conditioner\n        const coolingState = localStorage.getItem(\"coolingStatus\");\n        const dehumidifyState = localStorage.getItem(\"dehumidifyingStatus\");\n        this.coolingStatus = coolingState ? coolingState : \"OFF\";\n        this.dehumidifyingStatus = dehumidifyState ? dehumidifyState : \"OFF\";\n\n        // Write to local storage\n        localStorage.setItem(\"manualMode\", \"true\");\n        localStorage.setItem(\"lightingStatus\", this.lightingStatus);\n        localStorage.setItem(\"waterHeaterStatus\", this.waterHeaterStatus);\n        localStorage.setItem(\"coolingStatus\", this.coolingStatus);\n        localStorage.setItem(\"dehumidifyingStatus\", this.dehumidifyingStatus);\n\n        // Initialise Fixed Display State (for View Data)\n        this.updateFixedStatus(\"lighting\", this.lightingStatus);\n        this.updateFixedStatus(\"water_heater\", this.waterHeaterStatus);\n\n        // Sync backend: Switch to manual mode\n        axios.post(\"http://localhost:5050/api/device/toggle-mode\", {\n          manual_mode: \"on\"\n        }).then(response => {\n          console.log(\"[Backend Sync] Switch to manual mode:\", response.data.message);\n        }).catch(error => {\n          console.error(\"[Error] Failed to switch to manual mode.:\", error);\n        });\n      }\n    },\n    convertToTableFormat(data) {\n      if (!data || typeof data !== 'object') return [];\n      return Object.entries(data).map(([key, value]) => ({\n        key,\n        value: typeof value === 'object' ? JSON.stringify(value) : value\n      }));\n    },\n    setCooling(state) {\n      this.coolingStatus = state;\n      localStorage.setItem(\"coolingStatus\", state);\n      this.syncCurrentState(\"aircon\", `COOLING_${state}`);\n    },\n    setDehumidifying(state) {\n      this.dehumidifyingStatus = state;\n      localStorage.setItem(\"dehumidifyingStatus\", state);\n      this.syncCurrentState(\"aircon\", `DEHUMIDIFYING_${state}`);\n    },\n    enableCamera() {\n      if (!this.manualMode || this.cameraStatus === \"on\") return;\n      navigator.mediaDevices.getUserMedia({\n        video: true\n      }).then(stream => {\n        this.cameraStream = stream;\n        this.cameraStatus = \"on\";\n\n        // It does not enforce the control of showCameraData, only the camera state.\n        this.$nextTick(() => {\n          const video = this.$refs.cameraVideo;\n          if (video) {\n            video.srcObject = stream;\n            video.play();\n          } else {\n            console.warn(\"cameraVideo ref not found — video element not rendered yet.\");\n          }\n        });\n\n        // axios.post(\"http://localhost:5050/api/device/camera/start\");\n      }).catch(err => {\n        console.error(\"Failed to enable camera:\", err);\n      });\n    },\n    disableCamera() {\n      if (this.cameraStream) {\n        this.cameraStream.getTracks().forEach(track => track.stop());\n        this.cameraStream = null;\n      }\n      this.cameraStatus = \"off\";\n\n      // Clear the video screen\n      if (this.$refs.cameraVideo) {\n        this.$refs.cameraVideo.srcObject = null;\n      }\n\n      // Don't turn off showCameraData, so that the View Data block can be controlled separately.\n    },\n    viewDeviceData(device) {\n      if (device === \"camera\") {\n        axios.get(\"http://localhost:5050/api/device/camera/manual-state\").then(stateRes => {\n          const manual = stateRes.data.manual_override;\n          axios.get(\"http://localhost:5050/api/realtime-db/fps\").then(res => {\n            const data = res.data;\n            data.status = manual === \"on\" ? this.cameraStatus : \"N/A\";\n            this.cameraData = data;\n            this.showCameraData = true;\n          });\n        });\n        return;\n      }\n\n      // The air conditioner is forced to use a fixed interface path to avoid dynamic splicing errors.\n      const url = device === \"aircon\" ? \"http://localhost:5050/api/device/aircon/view-data\" : `http://localhost:5050/api/device/${device}/view-data`;\n      axios.get(url).then(response => {\n        const originalData = response.data;\n        axios.get(`http://localhost:5050/api/device/${device}/manual-state`).then(stateRes => {\n          const status = stateRes.data.status;\n          const manual = stateRes.data.manual_override;\n          if (device === \"lighting\" && manual === \"on\") {\n            this.updateFixedStatus(device, status);\n            originalData.status = this.fixedStatus.lighting;\n          }\n          if (device === \"water_heater\" && manual === \"on\") {\n            this.updateFixedStatus(device, status);\n            originalData.status = this.fixedStatus.water_heater;\n          }\n          if (device === \"aircon\" && manual === \"on\") {\n            originalData.cooling_status = this.coolingStatus;\n            originalData.dehumidifying_status = this.dehumidifyingStatus;\n          }\n          if (device === \"lighting\") {\n            this.lightingData = originalData;\n            this.showLightingData = true;\n          } else if (device === \"water_heater\") {\n            this.waterHeaterData = originalData;\n            this.showWaterHeaterData = true;\n          } else if (device === \"aircon\") {\n            this.airConditionerData = originalData;\n            this.showAirData = true;\n          }\n        });\n      });\n    },\n    refreshDeviceData(device) {\n      if (device === \"camera\") {\n        this.viewDeviceData(\"camera\");\n        return;\n      }\n      const url = device === \"aircon\" ? \"http://localhost:5050/api/device/aircon/view-data\" : `http://localhost:5050/api/device/${device}/view-data`;\n      axios.get(url).then(response => {\n        const refreshed = response.data;\n        axios.get(`http://localhost:5050/api/device/${device}/manual-state`).then(res => {\n          const manual = res.data.manual_override;\n          const status = res.data.status;\n          if (manual === \"on\") {\n            this.updateFixedStatus(device, status);\n            if (device === \"lighting\") {\n              refreshed.status = this.fixedStatus.lighting;\n            } else if (device === \"water_heater\") {\n              refreshed.status = this.fixedStatus.water_heater;\n            } else if (device === \"aircon\") {\n              refreshed.cooling_status = this.coolingStatus;\n              refreshed.dehumidifying_status = this.dehumidifyingStatus;\n            }\n          }\n          if (device === \"lighting\") {\n            this.lightingData = refreshed;\n          } else if (device === \"water_heater\") {\n            this.waterHeaterData = refreshed;\n          } else if (device === \"aircon\") {\n            this.airConditionerData = refreshed;\n          }\n        });\n      });\n    },\n    syncLightingStatus() {\n      axios.get(\"http://localhost:5050/api/device/lighting/manual-state\").then(res => {\n        const status = res.data.status;\n        const manual = res.data.manual_override;\n        if (manual === \"on\") {\n          this.updateFixedStatus(\"lighting\", status);\n          this.lightingStatus = status; // Use the original state displayed in the box.\n        }\n      });\n    },\n    syncWaterHeaterStatus() {\n      axios.get(\"http://localhost:5050/api/device/water_heater/manual-state\").then(res => {\n        const status = res.data.status;\n        const manual = res.data.manual_override;\n        if (manual === \"on\") {\n          this.updateFixedStatus(\"water_heater\", status);\n          this.waterHeaterStatus = status; // Use the original state displayed in the box.\n          this.heaterButtonText = status === \"ON\" ? \"Turn Off\" : \"Turn On\";\n        }\n      });\n    },\n    syncAirconStatus() {\n      axios.get(\"http://localhost:5050/api/device/aircon/manual-state\").then(res => {\n        const manual = res.data.manual_override;\n        if (manual === \"on\") {\n          this.coolingStatus = res.data.cooling_status || \"ON\";\n          this.dehumidifyingStatus = res.data.dehumidifying_status || \"ON\";\n        }\n      });\n    },\n    updateFixedStatus(device, status) {\n      if (device === \"lighting\") {\n        if (status === \"BRIGHTER\") {\n          this.fixedStatus.lighting = \"on (Brighter)\";\n        } else if (status === \"DIMMER\") {\n          this.fixedStatus.lighting = \"on (Dimmer)\";\n        } else if (status === \"OFF\") {\n          this.fixedStatus.lighting = \"off\";\n        }\n      } else if (device === \"water_heater\") {\n        if (status === \"ON\") {\n          this.fixedStatus.water_heater = \"running\";\n        } else if (status === \"OFF\") {\n          this.fixedStatus.water_heater = \"stopped\";\n        }\n      }\n    },\n    closeDeviceData(device) {\n      if (device === \"lighting\") {\n        this.showLightingData = false;\n      } else if (device === \"water_heater\") {\n        this.showWaterHeaterData = false;\n      } else if (device === \"camera\") {\n        this.showCameraData = false;\n      } else if (device === \"aircon\") {\n        this.showAirData = false;\n      }\n    },\n    controlDevice(device, action) {\n      axios.post(`http://localhost:5050/api/device/${device}/${action}`).then(() => {\n        if (device === \"lighting\") {\n          this.lightingStatus = this.statusMapping[action] || \"OFF\";\n        } else if (device === \"water_heater\") {\n          this.waterHeaterStatus = this.statusMapping[action] || \"OFF\";\n        }\n        if (this.manualMode) {\n          this.syncCurrentState(device, action);\n        }\n      }).catch(error => {\n        console.error(`Failed to control ${device}:`, error);\n      });\n    },\n    syncCurrentState(device, action) {\n      axios.post(`http://localhost:5050/api/device/${device}/save-state`, {\n        status: action,\n        mode: this.manualMode ? \"on\" : \"off\"\n      }).then(() => {\n        console.log(`State synced for ${device}: ${action}, Mode: ${this.manualMode ? \"Manual\" : \"Auto\"}`);\n      }).catch(error => {\n        console.error(\"Failed to sync state:\", error);\n      });\n    },\n    toggleHeater() {\n      const action = this.waterHeaterStatus === \"OFF\" || this.waterHeaterStatus === \"N/A\" ? \"on\" : \"off\";\n      this.controlDevice(\"water_heater\", action);\n\n      // Toggle button text\n      this.heaterButtonText = action === \"on\" ? \"Turn Off\" : \"Turn On\";\n    },\n    goBack() {\n      this.$router.push('/home');\n    }\n  },\n  mounted() {\n    console.log(\"[Initialise] Synchronise manual mode and device status.\");\n    axios.get(\"http://localhost:5050/api/device/water_heater/current-status\").then(response => {\n      const {\n        manual_mode,\n        status\n      } = response.data;\n\n      // Recovery mode\n      this.manualMode = manual_mode === \"on\";\n      if (!this.manualMode) {\n        // If it's auto mode\n        this.lightingStatus = \"N/A\";\n        this.waterHeaterStatus = \"N/A\";\n        this.coolingStatus = \"N/A\";\n        this.dehumidifyingStatus = \"N/A\";\n        this.heaterButtonText = \"Turn On\";\n      } else {\n        // Automatically synchronises the current manual state.\n        this.syncLightingStatus();\n        this.syncWaterHeaterStatus();\n        this.syncAirconStatus();\n      }\n      console.log(`[Mode Sync] The current mode: ${manual_mode}, Water heater status: ${status}`);\n    }).catch(error => {\n      console.error(\"[Error] Failed to get device status: \", error);\n    });\n  }\n};","map":{"version":3,"names":["axios","data","manualMode","lightingStatus","waterHeaterStatus","heaterButtonText","statusMapping","brighter","dimmer","off","on","dialogVisible","deviceData","currentDevice","lightingData","waterHeaterData","cameraStatus","cameraData","showCameraData","cameraStream","showLightingData","showWaterHeaterData","coolingStatus","dehumidifyingStatus","airConditionerData","showAirData","fixedStatus","lighting","water_heater","methods","toggleManualMode","console","log","localStorage","setItem","removeItem","post","manual_mode","then","response","message","catch","error","lightingState","getItem","heaterState","coolingState","dehumidifyState","updateFixedStatus","convertToTableFormat","Object","entries","map","key","value","JSON","stringify","setCooling","state","syncCurrentState","setDehumidifying","enableCamera","navigator","mediaDevices","getUserMedia","video","stream","$nextTick","$refs","cameraVideo","srcObject","play","warn","err","disableCamera","getTracks","forEach","track","stop","viewDeviceData","device","get","stateRes","manual","manual_override","res","status","url","originalData","cooling_status","dehumidifying_status","refreshDeviceData","refreshed","syncLightingStatus","syncWaterHeaterStatus","syncAirconStatus","closeDeviceData","controlDevice","action","mode","toggleHeater","goBack","$router","push","mounted"],"sources":["src/views/DeviceControlPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"device-control-container\">\r\n    <!-- Title at the top of the page -->\r\n    <h2 style=\"text-align: center; margin-top: 20px; margin-bottom: 20px; font-weight: bold;\">\r\n      Device Control\r\n    </h2>\r\n\r\n    <!-- Manual mode switching -->\r\n    <el-switch\r\n      v-model=\"manualMode\"\r\n      active-text=\"Manual Mode\"\r\n      inactive-text=\"Auto Mode\"\r\n      @change=\"toggleManualMode\"\r\n    />\r\n\r\n    <!-- First row: Lighting and Water Heater -->\r\n    <el-row :gutter=\"20\" class=\"device-grid\">\r\n      <!-- Top Left - Lighting Control -->\r\n      <el-col :span=\"12\">\r\n        <el-card shadow=\"hover\" style=\"min-height: 320px;\">\r\n          <h3>Lighting Control</h3>\r\n          <p><strong>Status:</strong> {{ lightingStatus }}</p>\r\n          <el-button type=\"success\" @click=\"controlDevice('lighting', 'brighter')\" :disabled=\"!manualMode\">Brighter</el-button>\r\n          <el-button type=\"warning\" @click=\"controlDevice('lighting', 'dimmer')\" :disabled=\"!manualMode\">Dimmer</el-button>\r\n          <el-button type=\"danger\" @click=\"controlDevice('lighting', 'off')\" :disabled=\"!manualMode\">Turn Off</el-button>\r\n          <el-button type=\"primary\" @click=\"viewDeviceData('lighting')\" style=\"margin-left: 10px\">View Data</el-button>\r\n\r\n          <div v-if=\"showLightingData\" class=\"device-data-box\">\r\n            <h4>Latest Data:</h4>\r\n            <el-table :data=\"convertToTableFormat(lightingData)\" border style=\"width: 100%; font-size: 13px;\">\r\n              <el-table-column prop=\"key\" label=\"Field\" width=\"180\"></el-table-column>\r\n              <el-table-column prop=\"value\" label=\"Value\"></el-table-column>\r\n            </el-table>\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"refreshDeviceData('lighting')\">Refresh</el-button>\r\n            <el-button type=\"danger\" size=\"mini\" @click=\"closeDeviceData('lighting')\" style=\"margin-left: 5px;\">Close</el-button>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n\r\n      <!-- Top right - water heater -->\r\n      <el-col :span=\"12\">\r\n        <el-card shadow=\"hover\" style=\"min-height: 320px;\">\r\n          <h3>Water Heater</h3>\r\n          <p><strong>Status:</strong> {{ waterHeaterStatus }}</p>\r\n          <el-button type=\"primary\" @click=\"toggleHeater\" :disabled=\"!manualMode\">{{ heaterButtonText }}</el-button>\r\n          <el-button type=\"primary\" @click=\"viewDeviceData('water_heater')\" style=\"margin-left: 10px\">View Data</el-button>\r\n\r\n          <div v-if=\"showWaterHeaterData\" class=\"device-data-box\">\r\n            <h4>Latest Data:</h4>\r\n            <el-table :data=\"convertToTableFormat(waterHeaterData)\" border style=\"width: 100%; font-size: 13px;\">\r\n              <el-table-column prop=\"key\" label=\"Field\" width=\"180\"></el-table-column>\r\n              <el-table-column prop=\"value\" label=\"Value\"></el-table-column>\r\n            </el-table>\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"refreshDeviceData('water_heater')\">Refresh</el-button>\r\n            <el-button type=\"danger\" size=\"mini\" @click=\"closeDeviceData('water_heater')\" style=\"margin-left: 5px;\">Close</el-button>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <!-- Second row: Camera and Air Conditioner -->\r\n    <el-row :gutter=\"20\" class=\"device-grid\">\r\n      <!-- Bottom left - Camera -->\r\n      <el-col :span=\"12\">\r\n        <el-card shadow=\"hover\" style=\"min-height: 320px;\">\r\n          <h3>Surveillance Camera</h3>\r\n          <p><strong>Status:</strong> {{ manualMode ? cameraStatus : \"N/A\" }}</p>\r\n\r\n          <el-button type=\"primary\" @click=\"enableCamera\" :disabled=\"!manualMode || cameraStatus === 'on'\">Enable Camera</el-button>\r\n          <el-button type=\"danger\" @click=\"disableCamera\" :disabled=\"!manualMode || cameraStatus === 'off'\" style=\"margin-left: 5px\">Stop Camera</el-button>\r\n          <el-button type=\"primary\" @click=\"viewDeviceData('camera')\" style=\"margin-left: 5px\">View Data</el-button>\r\n\r\n          <div v-if=\"cameraStatus === 'on'\" class=\"camera-video-box\">\r\n            <video ref=\"cameraVideo\" autoplay muted playsinline style=\"width: 100%; border-radius: 6px; margin-top: 10px;\"></video>\r\n          </div>\r\n\r\n          <div v-if=\"showCameraData\" class=\"device-data-box\">\r\n            <h4>Latest Data:</h4>\r\n            <el-table :data=\"convertToTableFormat(cameraData)\" border style=\"width: 100%; font-size: 13px;\">\r\n              <el-table-column prop=\"key\" label=\"Field\" width=\"180\"></el-table-column>\r\n              <el-table-column prop=\"value\" label=\"Value\"></el-table-column>\r\n            </el-table>\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"refreshDeviceData('camera')\">Refresh</el-button>\r\n            <el-button type=\"danger\" size=\"mini\" @click=\"closeDeviceData('camera')\" style=\"margin-left: 5px;\">Close</el-button>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n\r\n      <!-- Bottom right - air conditioning -->\r\n      <el-col :span=\"12\">\r\n        <el-card shadow=\"hover\" style=\"min-height: 320px;\">\r\n          <h3>Air Conditioner</h3>\r\n          <p><strong>Cooling:</strong> {{ manualMode ? coolingStatus : \"N/A\" }}</p>\r\n          <p><strong>Dehumidifying:</strong> {{ manualMode ? dehumidifyingStatus : \"N/A\" }}</p>\r\n\r\n          <div style=\"margin-bottom: 10px;\">\r\n            <el-button type=\"success\" size=\"mini\" @click=\"setCooling('ON')\" :disabled=\"!manualMode\">Cooling (On)</el-button>\r\n            <el-button type=\"warning\" size=\"mini\" @click=\"setCooling('OFF')\" :disabled=\"!manualMode\" style=\"margin-left: 5px;\">Cooling (Off)</el-button>\r\n            <el-button type=\"success\" size=\"mini\" @click=\"setDehumidifying('ON')\" :disabled=\"!manualMode\" style=\"margin-left: 5px;\">Dehumidifying (On)</el-button>\r\n            <el-button type=\"warning\" size=\"mini\" @click=\"setDehumidifying('OFF')\" :disabled=\"!manualMode\" style=\"margin-left: 5px;\">Dehumidifying (Off)</el-button>\r\n          </div>\r\n\r\n          <el-button type=\"primary\" @click=\"viewDeviceData('aircon')\">View Data</el-button>\r\n\r\n          <div v-if=\"showAirData\" class=\"device-data-box\">\r\n            <h4>Latest Data:</h4>\r\n            <el-table :data=\"convertToTableFormat(airConditionerData)\" border style=\"width: 100%; font-size: 13px;\">\r\n              <el-table-column prop=\"key\" label=\"Field\" width=\"180\"></el-table-column>\r\n              <el-table-column prop=\"value\" label=\"Value\"></el-table-column>\r\n            </el-table>\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"refreshDeviceData('aircon')\">Refresh</el-button>\r\n            <el-button type=\"danger\" size=\"mini\" @click=\"closeDeviceData('aircon')\" style=\"margin-left: 5px;\">Close</el-button>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <!-- The back button is fixed in the bottom left corner -->\r\n    <el-button class=\"back-button\" type=\"info\" @click=\"goBack\">\r\n      Back to Home\r\n    </el-button>\r\n  </div>\r\n</template>\r\n\r\n\r\n\r\n\r\n<script>\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      manualMode: false,\r\n      lightingStatus: \"N/A\",\r\n      waterHeaterStatus: \"N/A\",\r\n      heaterButtonText: \"Turn On\",\r\n      statusMapping: {\r\n        brighter: \"BRIGHTER\",\r\n        dimmer: \"DIMMER\",\r\n        off: \"OFF\",\r\n        on: \"ON\",\r\n      },\r\n        dialogVisible: false,\r\n        deviceData: {},\r\n        currentDevice: \"\",\r\n        lightingData: {},\r\n        waterHeaterData: {},\r\n        cameraStatus: \"N/A\",\r\n        cameraData: {},\r\n        showCameraData: false,\r\n        cameraStream: null,\r\n        showLightingData: false,\r\n        showWaterHeaterData: false,\r\n        coolingStatus: \"N/A\",\r\n        dehumidifyingStatus: \"N/A\",\r\n        airConditionerData: {},\r\n        showAirData: false,\r\n        fixedStatus: {\r\n           lighting: null,\r\n           water_heater: null\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    toggleManualMode() {\r\n  console.log(`[Mode Switch] The current mode: ${this.manualMode ? 'Manual' : 'Auto'}`);\r\n\r\n  if (!this.manualMode) {\r\n    // Switch to automatic mode\r\n    console.log(\"[Switch to Auto Mode] status is reset to N/A\");\r\n\r\n    // All device status resets\r\n    this.lightingStatus = \"N/A\";\r\n    this.waterHeaterStatus = \"N/A\";\r\n    this.coolingStatus = \"N/A\";\r\n    this.dehumidifyingStatus = \"N/A\";\r\n    this.heaterButtonText = \"Turn On\";\r\n\r\n    // Clear the local storage\r\n    localStorage.setItem(\"manualMode\", \"false\");\r\n    localStorage.removeItem(\"lightingStatus\");\r\n    localStorage.removeItem(\"waterHeaterStatus\");\r\n    localStorage.removeItem(\"coolingStatus\");\r\n    localStorage.removeItem(\"dehumidifyingStatus\");\r\n\r\n    // Clear the fixed display status\r\n    this.fixedStatus = {\r\n      lighting: null,\r\n      water_heater: null\r\n    };\r\n\r\n    // Sync backend: Switch to automatic mode\r\n    axios.post(\"http://localhost:5050/api/device/toggle-mode\", {\r\n      manual_mode: \"off\"\r\n    })\r\n    .then((response) => {\r\n      console.log(\"[Backend Sync] switches to automatic mode:\", response.data.message);\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"[Error] Failed to switch to automatic mode:\", error);\r\n    });\r\n\r\n  } else {\r\n    // Switch to manual mode\r\n    console.log(\"[Switch to Manual Mode] Restore the state of local storage\");\r\n\r\n    // Restore the lights and water heater status\r\n    const lightingState = localStorage.getItem(\"lightingStatus\");\r\n    const heaterState = localStorage.getItem(\"waterHeaterStatus\");\r\n\r\n    this.lightingStatus = lightingState ? lightingState : \"OFF\";\r\n    this.waterHeaterStatus = heaterState ? heaterState : \"OFF\";\r\n    this.heaterButtonText = this.waterHeaterStatus === \"ON\" ? \"Turn Off\" : \"Turn On\";\r\n\r\n    // Restore the cooling / dehumidifying state of the air conditioner\r\n    const coolingState = localStorage.getItem(\"coolingStatus\");\r\n    const dehumidifyState = localStorage.getItem(\"dehumidifyingStatus\");\r\n\r\n    this.coolingStatus = coolingState ? coolingState : \"OFF\";\r\n    this.dehumidifyingStatus = dehumidifyState ? dehumidifyState : \"OFF\";\r\n\r\n    // Write to local storage\r\n    localStorage.setItem(\"manualMode\", \"true\");\r\n    localStorage.setItem(\"lightingStatus\", this.lightingStatus);\r\n    localStorage.setItem(\"waterHeaterStatus\", this.waterHeaterStatus);\r\n    localStorage.setItem(\"coolingStatus\", this.coolingStatus);\r\n    localStorage.setItem(\"dehumidifyingStatus\", this.dehumidifyingStatus);\r\n\r\n    // Initialise Fixed Display State (for View Data)\r\n    this.updateFixedStatus(\"lighting\", this.lightingStatus);\r\n    this.updateFixedStatus(\"water_heater\", this.waterHeaterStatus);\r\n\r\n    // Sync backend: Switch to manual mode\r\n    axios.post(\"http://localhost:5050/api/device/toggle-mode\", {\r\n      manual_mode: \"on\"\r\n    })\r\n    .then((response) => {\r\n      console.log(\"[Backend Sync] Switch to manual mode:\", response.data.message);\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"[Error] Failed to switch to manual mode.:\", error);\r\n    });\r\n  }\r\n},\r\nconvertToTableFormat(data) {\r\n  if (!data || typeof data !== 'object') return [];\r\n  return Object.entries(data).map(([key, value]) => ({\r\n    key,\r\n    value: typeof value === 'object' ? JSON.stringify(value) : value\r\n  }));\r\n},\r\n\r\nsetCooling(state) {\r\n  this.coolingStatus = state;\r\n  localStorage.setItem(\"coolingStatus\", state);\r\n  this.syncCurrentState(\"aircon\", `COOLING_${state}`);\r\n},\r\n\r\nsetDehumidifying(state) {\r\n  this.dehumidifyingStatus = state;\r\n  localStorage.setItem(\"dehumidifyingStatus\", state);\r\n  this.syncCurrentState(\"aircon\", `DEHUMIDIFYING_${state}`);\r\n},\r\nenableCamera() {\r\n  if (!this.manualMode || this.cameraStatus === \"on\") return;\r\n\r\n  navigator.mediaDevices.getUserMedia({ video: true })\r\n    .then((stream) => {\r\n      this.cameraStream = stream;\r\n      this.cameraStatus = \"on\";\r\n\r\n      // It does not enforce the control of showCameraData, only the camera state.\r\n      this.$nextTick(() => {\r\n        const video = this.$refs.cameraVideo;\r\n        if (video) {\r\n          video.srcObject = stream;\r\n          video.play();\r\n        } else {\r\n          console.warn(\"cameraVideo ref not found — video element not rendered yet.\");\r\n        }\r\n      });\r\n\r\n      // axios.post(\"http://localhost:5050/api/device/camera/start\");\r\n    })\r\n    .catch((err) => {\r\n      console.error(\"Failed to enable camera:\", err);\r\n    });\r\n},\r\n\r\ndisableCamera() {\r\n  if (this.cameraStream) {\r\n    this.cameraStream.getTracks().forEach(track => track.stop());\r\n    this.cameraStream = null;\r\n  }\r\n\r\n  this.cameraStatus = \"off\";\r\n\r\n  // Clear the video screen\r\n  if (this.$refs.cameraVideo) {\r\n    this.$refs.cameraVideo.srcObject = null;\r\n  }\r\n\r\n  // Don't turn off showCameraData, so that the View Data block can be controlled separately.\r\n},\r\n\r\n\r\nviewDeviceData(device) {\r\n  if (device === \"camera\") {\r\n    axios.get(\"http://localhost:5050/api/device/camera/manual-state\")\r\n      .then((stateRes) => {\r\n        const manual = stateRes.data.manual_override;\r\n\r\n        axios.get(\"http://localhost:5050/api/realtime-db/fps\")\r\n          .then((res) => {\r\n            const data = res.data;\r\n            data.status = manual === \"on\" ? this.cameraStatus : \"N/A\";\r\n            this.cameraData = data;\r\n            this.showCameraData = true;\r\n          });\r\n      });\r\n    return;\r\n  }\r\n\r\n  // The air conditioner is forced to use a fixed interface path to avoid dynamic splicing errors.\r\n  const url = device === \"aircon\"\r\n    ? \"http://localhost:5050/api/device/aircon/view-data\"\r\n    : `http://localhost:5050/api/device/${device}/view-data`;\r\n\r\n  axios.get(url)\r\n    .then((response) => {\r\n      const originalData = response.data;\r\n\r\n      axios.get(`http://localhost:5050/api/device/${device}/manual-state`)\r\n        .then((stateRes) => {\r\n          const status = stateRes.data.status;\r\n          const manual = stateRes.data.manual_override;\r\n\r\n          if (device === \"lighting\" && manual === \"on\") {\r\n            this.updateFixedStatus(device, status);\r\n            originalData.status = this.fixedStatus.lighting;\r\n          }\r\n\r\n          if (device === \"water_heater\" && manual === \"on\") {\r\n            this.updateFixedStatus(device, status);\r\n            originalData.status = this.fixedStatus.water_heater;\r\n          }\r\n\r\n          if (device === \"aircon\" && manual === \"on\") {\r\n            originalData.cooling_status = this.coolingStatus;\r\n            originalData.dehumidifying_status = this.dehumidifyingStatus;\r\n          }\r\n\r\n          if (device === \"lighting\") {\r\n            this.lightingData = originalData;\r\n            this.showLightingData = true;\r\n          } else if (device === \"water_heater\") {\r\n            this.waterHeaterData = originalData;\r\n            this.showWaterHeaterData = true;\r\n          } else if (device === \"aircon\") {\r\n            this.airConditionerData = originalData;\r\n            this.showAirData = true;\r\n          }\r\n        });\r\n    });\r\n},\r\n\r\n\r\nrefreshDeviceData(device) {\r\n  if (device === \"camera\") {\r\n    this.viewDeviceData(\"camera\");\r\n    return;\r\n  }\r\n\r\n  const url = device === \"aircon\"\r\n    ? \"http://localhost:5050/api/device/aircon/view-data\"\r\n    : `http://localhost:5050/api/device/${device}/view-data`;\r\n\r\n  axios.get(url)\r\n    .then((response) => {\r\n      const refreshed = response.data;\r\n\r\n      axios.get(`http://localhost:5050/api/device/${device}/manual-state`)\r\n        .then((res) => {\r\n          const manual = res.data.manual_override;\r\n          const status = res.data.status;\r\n\r\n          if (manual === \"on\") {\r\n            this.updateFixedStatus(device, status);\r\n\r\n            if (device === \"lighting\") {\r\n              refreshed.status = this.fixedStatus.lighting;\r\n            } else if (device === \"water_heater\") {\r\n              refreshed.status = this.fixedStatus.water_heater;\r\n            } else if (device === \"aircon\") {\r\n              refreshed.cooling_status = this.coolingStatus;\r\n              refreshed.dehumidifying_status = this.dehumidifyingStatus;\r\n            }\r\n          }\r\n\r\n          if (device === \"lighting\") {\r\n            this.lightingData = refreshed;\r\n          } else if (device === \"water_heater\") {\r\n            this.waterHeaterData = refreshed;\r\n          } else if (device === \"aircon\") {\r\n            this.airConditionerData = refreshed;\r\n          }\r\n        });\r\n    });\r\n},\r\nsyncLightingStatus() {\r\n  axios.get(\"http://localhost:5050/api/device/lighting/manual-state\")\r\n    .then((res) => {\r\n      const status = res.data.status;\r\n      const manual = res.data.manual_override;\r\n      if (manual === \"on\") {\r\n        this.updateFixedStatus(\"lighting\", status);\r\n        this.lightingStatus = status;  // Use the original state displayed in the box.\r\n      }\r\n    });\r\n},\r\n\r\nsyncWaterHeaterStatus() {\r\n  axios.get(\"http://localhost:5050/api/device/water_heater/manual-state\")\r\n    .then((res) => {\r\n      const status = res.data.status;\r\n      const manual = res.data.manual_override;\r\n      if (manual === \"on\") {\r\n        this.updateFixedStatus(\"water_heater\", status);\r\n        this.waterHeaterStatus = status;  // Use the original state displayed in the box.\r\n        this.heaterButtonText = status === \"ON\" ? \"Turn Off\" : \"Turn On\";\r\n      }\r\n    });\r\n},\r\n\r\n\r\n  syncAirconStatus() {\r\n    axios.get(\"http://localhost:5050/api/device/aircon/manual-state\")\r\n      .then((res) => {\r\n        const manual = res.data.manual_override;\r\n        if (manual === \"on\") {\r\n          this.coolingStatus = res.data.cooling_status || \"ON\";\r\n          this.dehumidifyingStatus = res.data.dehumidifying_status || \"ON\";\r\n        }\r\n      });\r\n  },\r\n\r\nupdateFixedStatus(device, status) {\r\n  if (device === \"lighting\") {\r\n    if (status === \"BRIGHTER\") {\r\n      this.fixedStatus.lighting = \"on (Brighter)\";\r\n    } else if (status === \"DIMMER\") {\r\n      this.fixedStatus.lighting = \"on (Dimmer)\";\r\n    } else if (status === \"OFF\") {\r\n      this.fixedStatus.lighting = \"off\";\r\n    }\r\n  } else if (device === \"water_heater\") {\r\n    if (status === \"ON\") {\r\n      this.fixedStatus.water_heater = \"running\";\r\n    } else if (status === \"OFF\") {\r\n      this.fixedStatus.water_heater = \"stopped\";\r\n    }\r\n  }\r\n},\r\n\r\n\r\ncloseDeviceData(device) {\r\n  if (device === \"lighting\") {\r\n    this.showLightingData = false;\r\n  } else if (device === \"water_heater\") {\r\n    this.showWaterHeaterData = false;\r\n  } else if (device === \"camera\") {\r\n    this.showCameraData = false;\r\n  } else if (device === \"aircon\") {\r\n    this.showAirData = false;\r\n  }\r\n},\r\n\r\n\r\n    controlDevice(device, action) {\r\n      axios\r\n        .post(`http://localhost:5050/api/device/${device}/${action}`)\r\n        .then(() => {\r\n          if (device === \"lighting\") {\r\n            this.lightingStatus = this.statusMapping[action] || \"OFF\";\r\n          } else if (device === \"water_heater\") {\r\n            this.waterHeaterStatus = this.statusMapping[action] || \"OFF\";\r\n          }\r\n\r\n          if (this.manualMode) {\r\n            this.syncCurrentState(device, action);\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.error(`Failed to control ${device}:`, error);\r\n        });\r\n    },\r\n    syncCurrentState(device, action) {\r\n      axios.post(`http://localhost:5050/api/device/${device}/save-state`, {\r\n        status: action,\r\n        mode: this.manualMode ? \"on\" : \"off\"\r\n      })\r\n      .then(() => {\r\n        console.log(`State synced for ${device}: ${action}, Mode: ${this.manualMode ? \"Manual\" : \"Auto\"}`);\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Failed to sync state:\", error);\r\n      });\r\n    },\r\n    toggleHeater() {\r\n      const action = this.waterHeaterStatus === \"OFF\" || this.waterHeaterStatus === \"N/A\" ? \"on\" : \"off\";\r\n      this.controlDevice(\"water_heater\", action);\r\n\r\n      // Toggle button text\r\n      this.heaterButtonText = action === \"on\" ? \"Turn Off\" : \"Turn On\";\r\n    },\r\n    goBack() {\r\n      this.$router.push('/home');\r\n    }\r\n  },\r\n  mounted() {\r\n  console.log(\"[Initialise] Synchronise manual mode and device status.\");\r\n\r\n  axios.get(\"http://localhost:5050/api/device/water_heater/current-status\")\r\n    .then((response) => {\r\n      const { manual_mode, status } = response.data;\r\n\r\n      // Recovery mode\r\n      this.manualMode = manual_mode === \"on\";\r\n\r\n      if (!this.manualMode) {\r\n        // If it's auto mode\r\n        this.lightingStatus = \"N/A\";\r\n        this.waterHeaterStatus = \"N/A\";\r\n        this.coolingStatus = \"N/A\";\r\n        this.dehumidifyingStatus = \"N/A\";\r\n        this.heaterButtonText = \"Turn On\";\r\n      } else {\r\n        // Automatically synchronises the current manual state.\r\n        this.syncLightingStatus();\r\n        this.syncWaterHeaterStatus();\r\n        this.syncAirconStatus();\r\n      }\r\n\r\n      console.log(`[Mode Sync] The current mode: ${manual_mode}, Water heater status: ${status}`);\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"[Error] Failed to get device status: \", error);\r\n    });\r\n},\r\n\r\n\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.device-control-container {\r\n  padding: 20px;\r\n  min-height: 140vh; /* Make two rows of cards large enough to expand. */\r\n  box-sizing: border-box;\r\n}\r\n\r\n.device-grid {\r\n  margin-top: 20px;\r\n}\r\n\r\n.back-button {\r\n  position: fixed;\r\n  bottom: 20px;\r\n  left: 20px;\r\n}\r\n\r\n/* Data display area for all devices */\r\n.device-data-box {\r\n  background-color: #ffffff;\r\n  border: 1px solid #ddd;\r\n  border-radius: 6px;\r\n  padding: 10px;\r\n  margin-top: 10px;\r\n  font-size: 13px;\r\n  max-height: 260px;\r\n  overflow-y: auto;\r\n}\r\n\r\n/* Beautify the table display fields. */\r\n.device-data-box .el-table {\r\n  font-size: 13px;\r\n}\r\n\r\n.device-data-box .el-table td,\r\n.device-data-box .el-table th {\r\n  padding: 4px 8px;\r\n  font-family: monospace;\r\n  white-space: nowrap;\r\n}\r\n\r\n/* Uniform height for all common device cards (including after expanding View Data) */\r\n.el-card {\r\n  min-height: 580px; /* Consistent with the camera to prevent post-click propping up or misalignment. */\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n}\r\n\r\n/* Camera card class name (can be styled separately) */\r\n.camera-card {\r\n  min-height: 580px;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: flex-start;\r\n}\r\n\r\n/* Camera video display area (heightened) */\r\n.camera-video-box {\r\n  margin-top: 10px;\r\n  overflow: hidden;\r\n  border: 1px solid #ccc;\r\n  border-radius: 6px;\r\n  height: 360px;\r\n}\r\n\r\n/* The video fills the container but does not stretch */\r\n.camera-video-box video {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n/* Responsive order (cameras below) */\r\n@media (min-width: 768px) {\r\n  .camera-col {\r\n    order: 2;\r\n  }\r\n  .heater-col {\r\n    order: 1;\r\n  }\r\n}\r\n</style>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}